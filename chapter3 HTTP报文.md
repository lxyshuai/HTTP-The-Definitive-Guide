## 报文流
### 报文流流入源端服务器
### 报文向下游流动









## 报文的组成部分

*  HTTP报文是简单的格式化数据块.
*  由三个部分组成:
	1. 对报文进行描述的起始行
	2. 包含属性的首部
	3. 可选的包含数据的主体
* 起始行和首部就是由行分隔的ASCII文本.每行都以一个由两个字符组成的行终止序列作为结束,其中包括一个回车符(13)和一个换行符(10).这个行终止序列可以写做CRLF
* 实体的主体或报文的主体是一个可选的数据块,看包含文本或二进制数据,也可以为空



### 报文语法

* 请求报文格式:

```
<method> <request-URL> <version>
<headers>

<entity-body>
```

* 请求报文格式:

```
<version> <status> <reason-phrase>
<headers>

<entity-body>
```

* 方法(method):客户端希望服务器对资源执行的动作
* 请求URL(request-URL):命名了所请求的资源,或者URL路径组件的完整URL
* 版本(version):报文所使用的HTTP版本,格式``HTTP/<major>/<minor>``
* 状态码(status-code):描述了请求过程发生的情况,每个状态码的第一位数字用于描述状态的一般类别
* 原因短语(reason-phrase):数字状态码的可读版本
* 首部(header):可以有0个或多个首部,``key:value``.首部是由一个空行(CRLF)结束,表示首部列表的结束和实体主体部分的开始
* 实体主体部分:实体的主体部分包含一个由任意数据组成的数据块.并不是所有的报文都包含实体的主体部分,有时,报文只是以一个CRLF结束
1. Select the Solution Type

3. Coordinate System Settings

著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。



### 起始行

1. 请求行
  * 请求报文请求服务器对资源进行一些操作
  * 请求行包含一个方法(描述了服务器一个执行的操作)、一个请求URL(描述了要对哪个资源执行这个方法)和HTTP版本(告知服务器客户端使用的是那种HTTP).
  * 所有这些字段都由空格符分隔
2. 响应行
  * 响应报文承载了状态信息和操作产生的所有结果数据
  * 响应行包含HTTP版本、数字状态码和描述操作状态的文本形式的原因短语
3. 方法
  * 常用的HTTP方法
	| 方法 | 描述 | 是否包含主体 |
	|:-------:|:--------------------------------------------------:|:------------:|
	| GET | 从服务器获得一份文档 | 否 |
	| HEAD | 只从服务器获取文档的首部 | 否 |
	| POST | 想服务器发送需要处理的数据 | 是 |
	| PUT | 将请求的主体部分存储在服务器上 | 是 |
	| TRACE | 对可能经过代理服务器传送到服务器上去的报文进行追踪 | 否 |
	| OPTIONS | 决定考研在服务器执行哪些方法 | 否 |
	| DELETE | 从服务器上删除一份文档 | 否 |

4. 状态码
	* 状态码告诉客户端,发生了什么事情
	| 整体方位 | 已定义范围 | 分类 |
	|:--------:|:----------:|:----------:|
	| 100-199 | 100-101 | 信息提示 |
	| 200-299 | 200-206 | 成功 |
	| 300-399 | 300-305 | 重定向 |
	| 400-499 | 400-415 | 客户端错误 |
	| 500-599 | 500-505 | 服务端错误 |

5. 原因短语
	* 为状态码提供文本形式的解释

6. 版本号
	TODO



### 首部

* HTTP首部字段向请求和响应报文中添加一些附加信息.本质上来说,它们只是一些key/value的列表
1. 首部分类
	* 通用首部:既可以出现在请求报文中,也可以出现在响应报文中
	* 请求首部:提供更多有关请求的信息
	* 响应首部:提供更多有关响应的信息
	* 实体首部:描述主体的长度和内容,或者资源本身
	* 扩展首部:规范中没有的新首部
	* 每个HTTP首部都有一种简单的语法:名字后面跟着冒号(:),然后跟上可选的空格,再跟上字段值,最后是一个CRLF
2. 首部延续行
	* 将长的首部氛围多行提高可读性,读出来的每行前面至少要有一个空格或制表符



### 实体的主体部分

* 实体的主体是HTTP报文的符合,就是HTTP要传输的内容









## 方法



### 安全方法:

* GET和HEAD被认为是安全方法,这就意味着使用GET和HEAD方法的HTTP请求不会产生什么动作



### GET

* 最常用方法,用于请求服务器发送某资源
* HTTP/1.1要求服务器实现此方法



### HEAD

* HEAD方法与GET方法的行为很类似,但服务器在响应中只返回首部,不会返回实体的主体的部分
* 这就允许客户端在未获取实际资源的情况下,对资源的首部进行检查
* 使用HEAD,可以:
	* 在不获取资源的情况下了解资源情况(比如,判断其类型)
	* 查看响应中的状态码,看看某个对象是否存在
	* 通过查看首部,测试资源是否被修改
* 服务器开发者必须确保返回的首部与GET请求所返回的首部完全相同



### PUT

* PUT方法的语义就是让服务器用请求的主体部分来创建一个由所请求的URL命名的新文档,或者,如果那个URL已经存在的话,就用这个主体替代
* 因为PUT运行用户对内容进行修改,所以使用PUT之前,应用密码登录



### POST

* POST方法起初用来向服务器输入数据.实际上,通常会用来支持HTML表单



### TRACE

* 客户端发起一个请求,这个请求可能要穿过防火墙、网关、代理或其他一些应用程序。每个中间节点都可能会修改原始HTTP请求。TRACE方法允许客户端在最终把请求发送给服务器时候，看看它变成什么样子
* TRACE请求会在目的服务器端发起一个"环回"诊断.行程最后一站的服务器会弹回一条TRACE响应,并在响应主体中携带它收到原始请求报文
* TRACE方法主要用于诊断,用于验证请求是否如愿穿过了请求/响应链,用来查看代理和其他应用程序对用户请求所产生的效果
* 优缺点,它嘉定中间应用程序对不同类型请求处理是相同的,TRACE并不提供区分这些方法的机制.通常,中间应用程序会自行决定对TRACE请求的处理方式
* TRACE请求中不能带有实体的主体部分.
* TRACE响应的实体主体部分包含响应服务器收到的请求的精确副本



### OPTIONS

* OPTIONS方法请求Web服务器告知其支持的各种功能



### DELETE

* 请服务器删除请求URL所指定的资源
* 客户端应用程序无法保证删除操作一定执行,因为HTTP规范允许服务器在不通知客户端的情况下撤销请求



### 扩展方法

TODO





## 状态码
### 100-199(信息性状态码)
| 状态码 | 原因短语 | 含义 |
|:------:|:-------------------:|:-------------------------------------------------------------------------------------------:|
| 100 | Continue | 说明收到了请求的初始部分,请客户端继续.发送了这个状态码之后,服务器在收到请求之后必须进行响应 |
| 101 | Switching Protocols | 说明服务器正在根据客户端的指定,将协议切换成Update首部所列的协议 |

1. 客户端与100 Continue
TODO
2. 服务器与100 Continue
TODO
3. 代理与100 Continue
TODO

### 200-299(成功状态码)

| 状态码 |           原因短语            |                             含义                             |
| :----: | :---------------------------: | :----------------------------------------------------------: |
|  200   |              OK               |         请求没问题,实体的主体部分包含了所请求的资源          |
|  201   |            Created            | 用于创建服务器对象的请求.响应的实体主体部分中应该包含各种引用了已创建的资源的URL,LOCATION首部包含的这是最具体的引用.服务器必须在发送这个状态码之前创建好对象 |
|  202   |           Accepted            | 请求已经接受,但服务器还未对其执行任何动作.不能保证服务器会完成这个请求;这只是意味着接受请求时,它看起来是有效的.服务器应该在实体的主体部分包含对请求状态的描述,或许还应该有对请求完成时间的估计(或者包含一个指针,指向可以获取此信息的位置) |
|  203   | Not-Authoritative Information | 实体首部包含的信息不是来自源端服务器,而是来自资源的一份副本.如果中间节点上有一份资源副本,但无法或者没有对它所发送的与资源有关的元信息(首部)进行验证. 这种响应吗并不是非用不可的; 如果实体首部来自源端服务器,响应为200状态的应用程序就可以将其作为一种可选性使用 <br>203 非权威内容，简单的说，就是通过代理访问原始服务器的时候，成功获取了原始服务器（状态200）的返回内容，但是代理对内容做出了一些改动，例如修改了文档编码等等，代理通过这个状态码告知用户，成功获取内容，但是这部分内容和原始服务器的返回内容可能不完全一致。 |
|  204   |          No Content           | 响应报文中包含若干首部和一个状态行,但是没有实体的主体部分.主要用于在浏览器不转为显示新文档的情况下,对其进行更新(比如刷新一个表单页面) |
|  205   |         Reset Content         | 另外一个主要用于浏览器的带吗.负责告知浏览器清楚当前页面中的所有HTML表单元素 |
|  206   |        Partial Content        | 成功执行了一个部分或Range(范围请求).稍后我们会看到,客户端可以通过一个特殊的首部来获取部分或某个范围内的文档--这个状态码就说明方位请求成功. <br>206响应中必须包含Content-Range、Date以及ETag或Content-Location首部 |

